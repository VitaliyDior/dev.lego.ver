<h3><i class="fa fa-angle-right"></i>Редактирование категориии {if $category} {$category.name} {else}новой{/if} </h3>
<div class="form-panel">
    <form  class="form-horizontal style-form" action="" id="category_edit_form">
        <input type="hidden" name="id" id="cat_id" value="{$category.categoryID}">
       <div class="form-group">
           <label class="col-sm-2 control-label">Название категории </label>
           <div class="col-sm-8">
               <input type="text" class="form-control" name="name" value="{$category.name}">
           </div>
           <div class="col-sm-2 text-center">
               <div class="switch switch-square"
                    data-on-label="<i class=' fa fa-check'></i>"
                    data-off-label="<i class='fa fa-times'></i>">
                   <input type="checkbox" checked=""  name="enabled" />
               </div>
           </div>
       </div>
        <div class="form-group">
            <label class="col-sm-2 col-sm-2 control-label">URL</label>
            <div class="col-sm-10">
                <input type="text" class="form-control " id="hurl" disabled name="hurl" value="{$category.hurl}">
                <span class="help-block">Двойной клик для редакирования этого поля.</span>
            </div>
        </div>

    </form>
</div>
{literal}
<script>
    $(document).on('dblclick','#hurl',function(){
        $(this).removeAttr('disabled');
    });
    $(document).on('change','#hurl',function(){
        var that = $(this);
        var url= that.val();
        var id = $('#cat_id').val();
        if(url.length>3){
            request = 'action=check_url&url='+url+'&id='+id;
            $.post('admin.php?dpt=catalog&sub=categories', request, function(resp){
                var data=JSON.parse(resp);

                if(data.status){
                    that.parent().removeClass('has-error').addClass('has-success');
                }else{
                    that.parent().removeClass('has-success').addClass('has-error');
                }
                that.next().remove();
                $(data.data).insertAfter(that);
            });
        }
    });
</script>
{/literal}